module.exports=[52609,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(759),e=a.i(46271),f=a.i(29716),g=a.i(38246),h=a.i(2753);function i(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.Skeleton,{className:"h-9 w-9 rounded-lg"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Skeleton,{className:"h-3 w-3 rounded-full"}),(0,b.jsx)(h.Skeleton,{className:"h-7 w-48"})]}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-64"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((a,c)=>(0,b.jsxs)("div",{className:"bg-card border border-card-border rounded-xl p-4 space-y-2 text-center",children:[(0,b.jsx)(h.Skeleton,{className:"h-4 w-16 mx-auto"}),(0,b.jsx)(h.Skeleton,{className:"h-8 w-12 mx-auto"})]},c))}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Skeleton,{className:"h-5 w-28 mb-4"}),(0,b.jsx)("div",{className:"bg-card border border-card-border rounded-xl overflow-hidden divide-y divide-card-border",children:Array.from({length:5}).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between px-5 py-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(h.Skeleton,{className:"h-4 w-40"}),(0,b.jsx)(h.Skeleton,{className:"h-3 w-56"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.Skeleton,{className:"h-4 w-10"}),(0,b.jsx)(h.Skeleton,{className:"h-5 w-16 rounded-full"})]})]},c))})]})]})}var j=a.i(62036),k=a.i(33508),l=a.i(70106);let m=(0,l.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),n=(0,l.default)("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]),o=(0,l.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),p='a[href],button:not([disabled]),input:not([disabled]),textarea:not([disabled]),select:not([disabled]),[tabindex]:not([tabindex="-1"])';function q({project:a,open:d,onClose:f,onTriggered:g,triggerRef:h}){let[i,l]=(0,c.useState)([]),[q,r]=(0,c.useState)("main"),s=i.length>0?i.join(" and "):"",t=q&&"main"!==q?` BRANCH="${q}"`:"",u=`make ${a.makeTarget}${s?` TAGS="${s}"`:""}${t}`,v=(0,c.useRef)(null),w=(0,c.useCallback)(a=>{if("Escape"===a.key&&(a.stopPropagation(),f()),"Tab"===a.key&&v.current){let b=Array.from(v.current.querySelectorAll(p));if(0===b.length)return;let c=b[0],d=b[b.length-1];a.shiftKey?document.activeElement===c&&(a.preventDefault(),d.focus()):document.activeElement===d&&(a.preventDefault(),c.focus())}},[f]);(0,c.useEffect)(()=>{if(d)return document.addEventListener("keydown",w),requestAnimationFrame(()=>{if(v.current){let a=v.current.querySelector(p);a?.focus()}}),()=>document.removeEventListener("keydown",w)},[d,w]);let x=(0,c.useRef)(d);return(0,c.useEffect)(()=>{x.current&&!d&&h?.current?.focus(),x.current=d},[d,h]),(0,b.jsx)(j.AnimatePresence,{children:d&&(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:f,children:(0,b.jsxs)(e.motion.div,{ref:v,role:"dialog","aria-modal":"true","aria-labelledby":"run-tests-dialog-title",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-card border border-card-border rounded-xl p-6 w-full max-w-lg mx-4",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m,{className:"w-5 h-5 text-accent"}),(0,b.jsxs)("h3",{id:"run-tests-dialog-title",className:"text-lg font-semibold",children:["Run Tests — ",a.name]})]}),(0,b.jsx)("button",{onClick:f,className:"p-1 rounded hover:bg-card-border/50",children:(0,b.jsx)(k.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"mb-5 p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg flex items-start gap-3",children:[(0,b.jsx)(o,{className:"w-5 h-5 text-amber-400 mt-0.5 shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-amber-300 mb-1",children:"Coming Soon"}),(0,b.jsx)("p",{className:"text-xs text-muted",children:"Remote test execution requires a Cloud Run backend that is not yet deployed. For now, run tests locally using the command below."})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("span",{id:"tag-filters-label",className:"text-sm text-muted mb-2 block",children:"Tags (select to filter)"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",role:"group","aria-labelledby":"tag-filters-label",children:(a.tags||[]).map(a=>(0,b.jsx)("button",{"aria-pressed":i.includes(a),onClick:()=>{l(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},className:`text-xs px-3 py-1.5 rounded-full border transition-colors ${i.includes(a)?"bg-accent/20 border-accent text-accent":"bg-card-border/30 border-card-border text-muted hover:border-accent/50"}`,children:a},a))})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{htmlFor:"run-branch",className:"text-sm text-muted mb-2 block",children:"Branch"}),(0,b.jsx)("input",{id:"run-branch",type:"text",value:q,onChange:a=>r(a.target.value),className:"w-full bg-background border border-card-border rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-accent",placeholder:"main"})]}),(0,b.jsxs)("div",{className:"mb-5 bg-background border border-card-border rounded-lg p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(n,{className:"w-3.5 h-3.5 text-muted"}),(0,b.jsx)("span",{className:"text-xs text-muted",children:"Run locally"})]}),(0,b.jsx)("code",{className:"text-sm text-accent font-mono",children:u})]}),(0,b.jsx)("div",{className:"flex gap-3 justify-end",children:(0,b.jsx)("button",{onClick:f,className:"px-4 py-2 text-sm rounded-lg border border-card-border hover:bg-card-border/50 transition-colors",children:"Close"})})]})})})}var r=a.i(50522);let s=(0,l.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var t=a.i(87532),u=a.i(21827);function v({runs:a}){let d=(0,c.useMemo)(()=>{let b=Date.now(),c=[];for(let d=13;d>=0;d--){let e=b-(d+1)*864e5,f=b-864e5*d,g=a.filter(a=>{let b=new Date(a.timestamp).getTime();return b>=e&&b<f});if(g.length>0){let a=g.reduce((a,b)=>({p:a.p+(b.summary?.passed||0),t:a.t+(b.summary?.total||0)}),{p:0,t:0});c.push({date:new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric"}),passRate:a.t>0?Math.round(a.p/a.t*100):0,total:a.t})}}return c},[a]);return d.length<2?(0,b.jsxs)("div",{className:"bg-card border border-card-border rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Pass Rate Trend"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Not enough data points to display a trend. At least 2 days of runs are needed."})]}):(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-card border border-card-border rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Pass Rate Trend"}),(0,b.jsx)("div",{className:"flex items-end gap-2 h-40",children:d.map((a,c)=>(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,b.jsxs)("span",{className:"text-xs text-muted",children:[a.passRate,"%"]}),(0,b.jsx)(e.motion.div,{initial:{height:0},animate:{height:`${a.passRate}%`},transition:{delay:.4+.05*c,duration:.5},className:`w-full rounded-t-md ${a.passRate>=90?"bg-emerald-500":a.passRate>=70?"bg-yellow-500":"bg-red-500"}`,style:{minHeight:4}}),(0,b.jsx)("span",{className:"text-[10px] text-muted truncate w-full text-center",children:a.date})]},c))})]})}var w=a.i(33577);let x=["all","passed","failed","skipped"];function y({projectId:a}){let h=(0,d.useDashboardStore)(b=>b.getProject(a)),j=(0,d.useDashboardStore)(a=>a.runs),k=(0,c.useMemo)(()=>j.filter(b=>b.projectId===a),[j,a]),l=(0,d.useDashboardStore)(a=>a.loading),n=(0,d.useDashboardStore)(a=>a.error),o=(0,d.useDashboardStore)(a=>a.retry),[p,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)("all"),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(10);(0,c.useEffect)(()=>(document.title=h?`${h.name} | BDD Dashboard`:"BDD Dashboard",()=>{document.title="Silverline | Acceptance Test Dashboard"}),[h]);let H=(0,c.useMemo)(()=>[...new Set(k.map(a=>a.branch).filter(Boolean))].sort(),[k]),I=(0,c.useMemo)(()=>k.filter(a=>("all"===z||(a.status||(a.summary?.failed>0?"failed":a.summary?.skipped>0?"skipped":"passed"))===z)&&(!B||a.branch===B)),[k,z,B]);if(l)return(0,b.jsx)(i,{});if(n)return(0,b.jsx)(u.ErrorState,{message:n,onRetry:o});if(!h)return(0,b.jsxs)("div",{className:"text-center py-20 text-muted",children:[(0,b.jsx)("p",{children:"Project not found."}),(0,b.jsx)(g.default,{href:"/",className:"text-accent mt-2 inline-block",children:"Back to dashboard"})]});let J=k[0];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(w.Breadcrumb,{items:[{label:h.name}]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h.color}}),(0,b.jsx)("h2",{className:"text-2xl font-bold",children:h.name})]}),(0,b.jsx)("p",{className:"text-sm text-muted",children:h.description})]})}),(0,b.jsxs)("button",{onClick:()=>y(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-accent/20 hover:bg-accent/30 text-accent rounded-lg transition-colors text-sm font-medium",children:[(0,b.jsx)(m,{className:"w-4 h-4"}),"Run Tests"]})]}),(0,b.jsx)(q,{project:h,open:p,onClose:()=>y(!1),onTriggered:()=>{}}),J&&(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total",value:J.summary?.total??0,color:"text-accent"},{label:"Passed",value:J.summary?.passed??0,color:"text-emerald-600 dark:text-emerald-400"},{label:"Failed",value:J.summary?.failed??0,color:"text-red-600 dark:text-red-400"},{label:"Skipped",value:J.summary?.skipped??0,color:"text-yellow-600 dark:text-yellow-400"}].map(a=>(0,b.jsxs)("div",{className:"bg-card border border-card-border rounded-xl p-4 text-center",children:[(0,b.jsx)("p",{className:"text-sm text-muted",children:a.label}),(0,b.jsx)("p",{className:`text-2xl font-bold ${a.color}`,children:a.value})]},a.label))}),(0,b.jsx)(v,{runs:I}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Run History"}),(0,b.jsxs)("button",{onClick:()=>E(a=>!a),"aria-label":"Toggle filters","aria-expanded":D,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors "+(D||"all"!==z||B?"bg-accent/20 text-accent":"bg-card-border/50 text-muted hover:text-foreground"),children:[(0,b.jsx)(s,{className:"w-3.5 h-3.5"}),"Filter",("all"!==z||B)&&(0,b.jsx)("span",{className:"ml-1 w-2 h-2 rounded-full bg-accent"})]})]}),D&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-4 bg-card border border-card-border rounded-xl space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-muted",children:"Filters"}),("all"!==z||B)&&(0,b.jsx)("button",{onClick:()=>{A("all"),C(""),G(10)},className:"text-xs text-accent hover:underline",children:"Clear all"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{id:"status-filter-label",className:"text-xs text-muted mb-1 block",children:"Status"}),(0,b.jsx)("div",{className:"flex gap-1.5",role:"radiogroup","aria-labelledby":"status-filter-label",children:x.map(a=>(0,b.jsx)("button",{role:"radio","aria-checked":z===a,onClick:()=>{A(a),G(10)},className:"px-3 py-1 rounded-full text-xs font-medium border transition-colors "+(z===a?"bg-accent/20 border-accent/40 text-accent":"border-card-border text-muted hover:text-foreground"),children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"branch-filter",className:"text-xs text-muted mb-1 block",children:"Branch"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(t.Search,{className:"w-3.5 h-3.5 absolute left-2.5 top-1/2 -translate-y-1/2 text-muted"}),(0,b.jsxs)("select",{id:"branch-filter",value:B,onChange:a=>{C(a.target.value),G(10)},className:"w-full pl-8 pr-3 py-1.5 bg-transparent border border-card-border rounded-lg text-sm focus:outline-none focus:border-accent/50",children:[(0,b.jsx)("option",{value:"",children:"All branches"}),H.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]})]})]}),(0,b.jsxs)("div",{className:"bg-card border border-card-border rounded-xl overflow-hidden divide-y divide-card-border",children:[0===I.length&&(0,b.jsx)("div",{className:"px-5 py-8 text-center text-muted text-sm",children:"all"!==z||B?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{children:"No runs match the current filters."}),(0,b.jsx)("button",{onClick:()=>{A("all"),C("")},className:"text-accent hover:underline text-xs",children:"Clear filters"})]}):(0,b.jsx)("p",{children:"No test runs yet for this project."})}),I.slice(0,F).map((c,d)=>{let h=c.status||(c.summary?.failed>0?"failed":c.summary?.skipped>0?"skipped":"passed");return(0,b.jsx)(e.motion.div,{initial:d>=F-10&&F>10&&{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.2,delay:d>=F-10&&F>10?(d-(F-10))*.03:0},children:(0,b.jsxs)(g.default,{href:"/project/"+a+"/run/"+c.id+"/",className:"flex items-center justify-between px-5 py-3 hover:bg-card-border/30 transition-colors",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium",children:[(0,f.formatDate)(c.timestamp)," at ",(0,f.formatTime)(c.timestamp)]}),(0,b.jsxs)("p",{className:"text-xs text-muted",children:[c.environment&&c.environment+" · ",c.branch," · ",(0,f.formatDuration)(c.duration)]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"text-xs text-muted",children:[c.summary?.passed??0,"/",c.summary?.total??0]}),(0,b.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full border "+(0,f.statusBg)(h),children:h}),(0,b.jsx)(r.ChevronRight,{className:"w-4 h-4 text-muted"})]})]})},c.id)})]}),I.length>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-3 px-1",children:[(0,b.jsxs)("p",{className:"text-xs text-muted",children:["Showing ",Math.min(F,I.length)," of ",I.length," runs"]}),F<I.length&&(0,b.jsx)("button",{onClick:()=>G(a=>a+10),className:"text-sm text-accent hover:text-accent/80 font-medium transition-colors",children:"Show More"})]})]})]})}a.s(["default",()=>y],52609)}];

//# sourceMappingURL=projects_bdd-test-dashboard_src_app_project_%5BprojectId%5D_client_tsx_5dd67518._.js.map