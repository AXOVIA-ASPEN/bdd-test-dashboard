module.exports=[9648,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(759),e=a.i(58606);a.i(69387);var f=a.i(60574),g=a.i(46271),h=a.i(29716),i=a.i(38246),j=a.i(2753);function k(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(j.Skeleton,{className:"h-9 w-9 rounded-lg"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Skeleton,{className:"h-3 w-3 rounded-full"}),(0,b.jsx)(j.Skeleton,{className:"h-7 w-44"}),(0,b.jsx)(j.Skeleton,{className:"h-5 w-16 rounded-full"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(j.Skeleton,{className:"h-4 w-36"}),(0,b.jsx)(j.Skeleton,{className:"h-4 w-20"}),(0,b.jsx)(j.Skeleton,{className:"h-4 w-16"})]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((a,c)=>(0,b.jsxs)("div",{className:"bg-card border border-card-border rounded-xl p-4 space-y-2 text-center",children:[(0,b.jsx)(j.Skeleton,{className:"h-4 w-16 mx-auto"}),(0,b.jsx)(j.Skeleton,{className:"h-8 w-12 mx-auto"})]},c))}),Array.from({length:2}).map((a,c)=>(0,b.jsxs)("div",{className:"bg-card border border-card-border rounded-xl p-5 space-y-4",children:[(0,b.jsx)(j.Skeleton,{className:"h-5 w-48"}),(0,b.jsx)(j.Skeleton,{className:"h-4 w-72"}),(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:3}).map((a,c)=>(0,b.jsxs)("div",{className:"border border-card-border rounded-lg p-3 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(j.Skeleton,{className:"h-4 w-40"}),(0,b.jsx)(j.Skeleton,{className:"h-5 w-14 rounded-full"})]}),(0,b.jsx)("div",{className:"space-y-1",children:Array.from({length:4}).map((a,c)=>(0,b.jsx)(j.Skeleton,{className:"h-3 w-full max-w-md"},c))})]},c))})]},c))]})}var l=a.i(73570),m=a.i(50522),n=a.i(70106);let o=(0,n.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),p=(0,n.default)("git-branch",[["path",{d:"M15 6a9 9 0 0 0-9 9V3",key:"1cii5b"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}]]),q=(0,n.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),r=(0,n.default)("chevrons-down-up",[["path",{d:"m7 20 5-5 5 5",key:"13a0gw"}],["path",{d:"m7 4 5 5 5-5",key:"1kwcof"}]]),s=(0,n.default)("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),t=(0,n.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),u=(0,n.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var v=a.i(33577),w=a.i(62036),x=a.i(79453);function y({error:a}){let[d,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)(!1),h=a.split("\n"),i=h.length>3&&!d?h.slice(0,3).join("\n"):a;return(0,b.jsxs)("div",{className:"group/error relative mt-1 ml-14 text-xs text-red-600/80 dark:text-red-400/80 font-mono whitespace-pre-wrap bg-red-500/5 rounded p-2 max-h-48 overflow-auto",children:[(0,b.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(a).then(()=>{g(!0),setTimeout(()=>g(!1),2e3)})},"aria-label":f?"Copied":"Copy error message",className:"absolute top-1.5 right-1.5 p-1 rounded opacity-0 group-hover/error:opacity-100 focus:opacity-100 transition-opacity bg-red-500/10 hover:bg-red-500/20 text-red-600 dark:text-red-400 cursor-pointer",children:f?(0,b.jsx)(u,{className:"w-3.5 h-3.5"}):(0,b.jsx)(t,{className:"w-3.5 h-3.5"})}),i,h.length>3&&(0,b.jsx)("button",{onClick:()=>e(!d),className:"block mt-1 text-red-600 dark:text-red-400 underline cursor-pointer",children:d?"Show less":"Show more"})]})}function z({features:a,statusFilter:d,setStatusFilter:e}){let[f,i]=(0,c.useState)({});if((0,c.useEffect)(()=>{let b="all"===d?a||[]:(a||[]).filter(a=>(a.scenarios||[]).some(a=>a.status===d)),c={};b.forEach((a,b)=>{c[a.id||String(b)]=(a.scenarios||[]).some(a=>"failed"===a.status)}),i(c)},[a,d]),!a||0===a.length)return null;let j="all"===d?a:a.filter(a=>(a.scenarios||[]).some(a=>a.status===d)),k=j.every((a,b)=>f[a.id||String(b)]),l={passed:0,failed:0,skipped:0};for(let b of a)for(let a of b.scenarios||[])a.status in l&&l[a.status]++;let n=[{key:"all",label:"All",count:l.passed+l.failed+l.skipped,color:"text-accent",activeBg:"bg-accent/15 border-accent/40"},{key:"failed",label:"Failed",count:l.failed,color:"text-red-600 dark:text-red-400",activeBg:"bg-red-500/15 border-red-500/40"},{key:"skipped",label:"Skipped",count:l.skipped,color:"text-yellow-600 dark:text-yellow-400",activeBg:"bg-yellow-500/15 border-yellow-500/40"},{key:"passed",label:"Passed",count:l.passed,color:"text-emerald-600 dark:text-emerald-400",activeBg:"bg-emerald-500/15 border-emerald-500/40"}],o="all"===d?a:a.map(a=>({...a,scenarios:(a.scenarios||[]).filter(a=>a.status===d)})).filter(a=>a.scenarios.length>0);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[n.map(a=>(0,b.jsxs)("button",{onClick:()=>e(a.key),className:"text-sm px-3 py-1.5 rounded-full border transition-colors font-medium "+(d===a.key?a.activeBg+" "+a.color:"border-card-border text-muted hover:border-muted"),children:[a.label," (",a.count,")"]},a.key)),(0,b.jsxs)("button",{onClick:()=>{let a=!k,b={};j.forEach((c,d)=>{b[c.id||String(d)]=a}),i(b)},className:"ml-auto text-sm px-3 py-1.5 rounded-full border border-card-border text-muted hover:border-muted transition-colors font-medium inline-flex items-center gap-1.5",children:[k?(0,b.jsx)(r,{className:"w-3.5 h-3.5"}):(0,b.jsx)(s,{className:"w-3.5 h-3.5"}),k?"Collapse All":"Expand All"]})]}),o.length>0?o.map((a,c)=>{let d=a.id||String(c),e=f[d]??!1,j=(a.scenarios||[]).reduce((a,b)=>({...a,[b.status]:(a[b.status]||0)+1}),{passed:0,failed:0,skipped:0}),k=(a.scenarios||[]).length,l=k>0?Math.round(j.passed/k*100):0;return(0,b.jsxs)(g.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card border border-card-border rounded-xl overflow-hidden",children:[(0,b.jsxs)("button",{onClick:()=>i(a=>({...a,[d]:!a[d]})),className:"w-full text-left p-5 flex items-start gap-3 hover:bg-card-border/20 transition-colors cursor-pointer",children:[(0,b.jsx)(g.motion.div,{animate:{rotate:90*!!e},transition:{duration:.2},className:"mt-1 shrink-0",children:(0,b.jsx)(m.ChevronRight,{className:"w-4 h-4 text-muted"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted mt-0.5",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs mt-2 flex-wrap",children:[j.passed>0&&(0,b.jsxs)("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:["✅ ",j.passed," passed"]}),j.failed>0&&(0,b.jsxs)("span",{className:"text-red-600 dark:text-red-400 font-medium",children:["❌ ",j.failed," failed"]}),j.skipped>0&&(0,b.jsxs)("span",{className:"text-yellow-600 dark:text-yellow-400 font-medium",children:["⏭ ",j.skipped," skipped"]}),k>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,b.jsxs)("span",{className:"text-muted",children:[l,"%"]}),(0,b.jsxs)("div",{className:"w-20 h-1.5 bg-card-border rounded-full overflow-hidden flex",children:[j.passed>0&&(0,b.jsx)("div",{className:"h-full bg-emerald-500",style:{width:`${j.passed/k*100}%`}}),j.failed>0&&(0,b.jsx)("div",{className:"h-full bg-red-500",style:{width:`${j.failed/k*100}%`}}),j.skipped>0&&(0,b.jsx)("div",{className:"h-full bg-yellow-500",style:{width:`${j.skipped/k*100}%`}})]})]})]})]})]}),(0,b.jsx)(w.AnimatePresence,{initial:!1,children:e&&(0,b.jsx)(g.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:"easeInOut"},className:"overflow-hidden",children:(0,b.jsx)("div",{className:"px-5 pb-5 space-y-3",children:(a.scenarios||[]).map((a,c)=>(0,b.jsxs)("div",{className:"border border-card-border rounded-lg p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:a.name}),(0,b.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full border "+(0,h.statusBg)(a.status),children:a.status})]}),(0,b.jsx)("div",{className:"space-y-1",children:(a.steps||[]).map((a,c)=>(0,b.jsxs)("div",{className:"text-xs",children:[(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-accent font-mono w-12 shrink-0 font-semibold",children:a.keyword}),(0,b.jsx)("span",{className:(0,h.statusColor)(a.status),children:a.text}),null!=a.duration&&a.duration>0&&(0,b.jsx)("span",{className:"text-muted ml-auto shrink-0",children:(0,h.formatDuration)(a.duration)})]}),"failed"===a.status&&(a.error||a.errorMessage)&&(0,b.jsx)(y,{error:a.error||a.errorMessage})]},c))})]},c))})})})]},d)}):(0,b.jsxs)("div",{className:"text-center py-8 text-muted text-sm bg-card border border-card-border rounded-xl",children:["No ","all"!==d?d+" ":"","scenarios found."]})]})}function A({projectId:a,runId:j}){let m=(0,d.useDashboardStore)(b=>b.getProject(a)),[n,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!0),[u,w]=(0,c.useState)(null),[y,A]=(0,c.useState)("all"),[B,C]=(0,c.useState)(0),[D,E]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{if(n&&m){let a=n.timestamp?new Date(n.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Run";document.title=`Run ${a} - ${m.name} | BDD Dashboard`}else m&&(document.title=`${m.name} | BDD Dashboard`);return()=>{document.title="Silverline | Acceptance Test Dashboard"}},[n,m]),(0,c.useEffect)(()=>{let a;if(!j||"_"===j)return void t(!1);t(!0),w(null),E(!1);let b=(0,e.getDb)(),c=[],d=!1,g=!1,h=()=>{d&&g&&(t(!1),null===a?(r(null),E(!1)):void 0!==a&&(r({...a,features:c}),E(!0)))},i=(0,f.onSnapshot)((0,f.doc)(b,"runs",j),b=>{d=!0,a=b.exists()?{id:b.id,...(0,x.sanitizeTimestamps)(b.data())}:null,h()},a=>{console.error("Run listener error:",a),w(a.message||"An unexpected error occurred while loading run details."),t(!1),E(!1)}),k=(0,f.onSnapshot)((0,f.collection)(b,"runs",j,"features"),a=>{g=!0,c=a.docs.map(a=>({id:a.id,...(0,x.sanitizeTimestamps)(a.data())})),h()},a=>{console.error("Features listener error:",a),g=!0,h()});return()=>{i(),k(),E(!1)}},[j,B]),s)return(0,b.jsx)(k,{});if(u)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 max-w-md w-full text-center space-y-3",children:[(0,b.jsx)(l.AlertTriangle,{className:"w-10 h-10 text-red-500 mx-auto"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:"Failed to load run"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:u}),(0,b.jsxs)("button",{onClick:()=>C(a=>a+1),className:"inline-flex items-center gap-2 px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors text-sm font-medium",children:[(0,b.jsx)(q,{className:"w-4 h-4"}),"Retry"]})]}),(0,b.jsx)(i.default,{href:"/project/"+a+"/",className:"text-accent text-sm hover:underline",children:"Back to project"})]});if(!n)return(0,b.jsxs)("div",{className:"text-center py-20 text-muted",children:[(0,b.jsx)("p",{children:"Run not found."}),(0,b.jsx)(i.default,{href:"/project/"+a+"/",className:"text-accent mt-2 inline-block",children:"Back to project"})]});let F=n.status||(n.summary?.failed>0?"failed":n.summary?.skipped>0?"skipped":"passed");return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(v.Breadcrumb,{items:[{label:m?.name||a,href:"/project/"+a+"/"},{label:n.timestamp?"Run "+new Date(n.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Run Details"}]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:m?.color}}),(0,b.jsx)("h2",{className:"text-2xl font-bold",children:m?.name||a}),(0,b.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full border "+(0,h.statusBg)(F),children:F}),D&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full border border-emerald-500/40 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 font-medium",children:[(0,b.jsxs)("span",{className:"relative flex h-1.5 w-1.5",children:[(0,b.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,b.jsx)("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),"Live"]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted mt-1",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(o,{className:"w-3.5 h-3.5"}),(0,h.formatDate)(n.timestamp)," at ",(0,h.formatTime)(n.timestamp)]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(p,{className:"w-3.5 h-3.5"}),n.branch]}),n.duration>0&&(0,b.jsx)("span",{children:(0,h.formatDuration)(n.duration)})]})]})}),(0,b.jsx)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total",value:n.summary?.total??0,color:"text-accent"},{label:"Passed",value:n.summary?.passed??0,color:"text-emerald-600 dark:text-emerald-400"},{label:"Failed",value:n.summary?.failed??0,color:"text-red-600 dark:text-red-400"},{label:"Skipped",value:n.summary?.skipped??0,color:"text-yellow-600 dark:text-yellow-400"}].map(a=>(0,b.jsxs)("div",{className:"bg-card border border-card-border rounded-xl p-4 text-center",children:[(0,b.jsx)("p",{className:"text-sm text-muted",children:a.label}),(0,b.jsx)("p",{className:"text-2xl font-bold "+a.color,children:a.value})]},a.label))}),n.error&&(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.AlertTriangle,{className:"w-5 h-5 text-red-500"}),(0,b.jsx)("h3",{className:"font-semibold text-red-600 dark:text-red-400",children:"Run Error"})]}),(0,b.jsx)("pre",{className:"text-xs text-red-600/80 dark:text-red-400/80 font-mono whitespace-pre-wrap max-h-48 overflow-auto",children:n.error})]}),(0,b.jsx)(z,{features:n.features,statusFilter:y,setStatusFilter:A}),(!n.features||0===n.features.length)&&(0,b.jsx)("div",{className:"text-center py-8 text-muted text-sm bg-card border border-card-border rounded-xl",children:"No detailed results for this run."})]})}a.s(["default",()=>A],9648)}];

//# sourceMappingURL=9e3a1_bdd-test-dashboard_src_app_project_%5BprojectId%5D_run_%5BrunId%5D_client_tsx_b6a8a986._.js.map