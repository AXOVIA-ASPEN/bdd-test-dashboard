(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";let s=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],78894)},94351,e=>{"use strict";let s=(0,e.i(75254).default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);e.s(["Home",()=>s],94351)},92897,e=>{"use strict";var s=e.i(43476),t=e.i(22016),a=e.i(63059),r=e.i(94351);function l({items:e}){return(0,s.jsxs)("nav",{"aria-label":"Breadcrumb",className:"flex items-center gap-1.5 text-sm min-w-0",children:[(0,s.jsx)(t.default,{href:"/",className:"shrink-0 p-1 rounded hover:bg-card-border/50 transition-colors text-muted hover:text-accent","aria-label":"Dashboard",children:(0,s.jsx)(r.Home,{className:"w-4 h-4"})}),e.map((e,r)=>(0,s.jsxs)("span",{className:"flex items-center gap-1.5 min-w-0",children:[(0,s.jsx)(a.ChevronRight,{className:"w-3.5 h-3.5 text-muted shrink-0"}),e.href?(0,s.jsx)(t.default,{href:e.href,className:"text-muted hover:text-accent transition-colors truncate max-w-[200px] sm:max-w-none",title:e.label,children:e.label}):(0,s.jsx)("span",{className:"text-foreground font-medium truncate max-w-[200px] sm:max-w-none",title:e.label,children:e.label})]},r))]})}e.s(["Breadcrumb",()=>l])},86983,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(42104),r=e.i(75724);e.i(36180);var l=e.i(98925),d=e.i(46932),i=e.i(15357),n=e.i(22016),c=e.i(67628);function o(){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(c.Skeleton,{className:"h-9 w-9 rounded-lg"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Skeleton,{className:"h-3 w-3 rounded-full"}),(0,s.jsx)(c.Skeleton,{className:"h-7 w-44"}),(0,s.jsx)(c.Skeleton,{className:"h-5 w-16 rounded-full"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(c.Skeleton,{className:"h-4 w-36"}),(0,s.jsx)(c.Skeleton,{className:"h-4 w-20"}),(0,s.jsx)(c.Skeleton,{className:"h-4 w-16"})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,t)=>(0,s.jsxs)("div",{className:"bg-card border border-card-border rounded-xl p-4 space-y-2 text-center",children:[(0,s.jsx)(c.Skeleton,{className:"h-4 w-16 mx-auto"}),(0,s.jsx)(c.Skeleton,{className:"h-8 w-12 mx-auto"})]},t))}),Array.from({length:2}).map((e,t)=>(0,s.jsxs)("div",{className:"bg-card border border-card-border rounded-xl p-5 space-y-4",children:[(0,s.jsx)(c.Skeleton,{className:"h-5 w-48"}),(0,s.jsx)(c.Skeleton,{className:"h-4 w-72"}),(0,s.jsx)("div",{className:"space-y-3",children:Array.from({length:3}).map((e,t)=>(0,s.jsxs)("div",{className:"border border-card-border rounded-lg p-3 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c.Skeleton,{className:"h-4 w-40"}),(0,s.jsx)(c.Skeleton,{className:"h-5 w-14 rounded-full"})]}),(0,s.jsx)("div",{className:"space-y-1",children:Array.from({length:4}).map((e,t)=>(0,s.jsx)(c.Skeleton,{className:"h-3 w-full max-w-md"},t))})]},t))})]},t))]})}var m=e.i(78894),x=e.i(63059),u=e.i(75254);let h=(0,u.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),p=(0,u.default)("git-branch",[["path",{d:"M15 6a9 9 0 0 0-9 9V3",key:"1cii5b"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}]]),f=(0,u.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),b=(0,u.default)("chevrons-down-up",[["path",{d:"m7 20 5-5 5 5",key:"13a0gw"}],["path",{d:"m7 4 5 5 5-5",key:"1kwcof"}]]),j=(0,u.default)("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),g=(0,u.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),N=(0,u.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var y=e.i(92897),v=e.i(88653),k=e.i(96364);function w({error:e}){let[a,r]=(0,t.useState)(!1),[l,d]=(0,t.useState)(!1),i=e.split("\n"),n=i.length>3&&!a?i.slice(0,3).join("\n"):e;return(0,s.jsxs)("div",{className:"group/error relative mt-1 ml-14 text-xs text-red-600/80 dark:text-red-400/80 font-mono whitespace-pre-wrap bg-red-500/5 rounded p-2 max-h-48 overflow-auto",children:[(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e).then(()=>{d(!0),setTimeout(()=>d(!1),2e3)})},"aria-label":l?"Copied":"Copy error message",className:"absolute top-1.5 right-1.5 p-1 rounded opacity-0 group-hover/error:opacity-100 focus:opacity-100 transition-opacity bg-red-500/10 hover:bg-red-500/20 text-red-600 dark:text-red-400 cursor-pointer",children:l?(0,s.jsx)(N,{className:"w-3.5 h-3.5"}):(0,s.jsx)(g,{className:"w-3.5 h-3.5"})}),n,i.length>3&&(0,s.jsx)("button",{onClick:()=>r(!a),className:"block mt-1 text-red-600 dark:text-red-400 underline cursor-pointer",children:a?"Show less":"Show more"})]})}function S({features:e,statusFilter:a,setStatusFilter:r}){let[l,n]=(0,t.useState)({});if((0,t.useEffect)(()=>{let s="all"===a?e||[]:(e||[]).filter(e=>(e.scenarios||[]).some(e=>e.status===a)),t={};s.forEach((e,s)=>{t[e.id||String(s)]=(e.scenarios||[]).some(e=>"failed"===e.status)}),n(t)},[e,a]),!e||0===e.length)return null;let c="all"===a?e:e.filter(e=>(e.scenarios||[]).some(e=>e.status===a)),o=c.every((e,s)=>l[e.id||String(s)]),m={passed:0,failed:0,skipped:0};for(let s of e)for(let e of s.scenarios||[])e.status in m&&m[e.status]++;let u=[{key:"all",label:"All",count:m.passed+m.failed+m.skipped,color:"text-accent",activeBg:"bg-accent/15 border-accent/40"},{key:"failed",label:"Failed",count:m.failed,color:"text-red-600 dark:text-red-400",activeBg:"bg-red-500/15 border-red-500/40"},{key:"skipped",label:"Skipped",count:m.skipped,color:"text-yellow-600 dark:text-yellow-400",activeBg:"bg-yellow-500/15 border-yellow-500/40"},{key:"passed",label:"Passed",count:m.passed,color:"text-emerald-600 dark:text-emerald-400",activeBg:"bg-emerald-500/15 border-emerald-500/40"}],h="all"===a?e:e.map(e=>({...e,scenarios:(e.scenarios||[]).filter(e=>e.status===a)})).filter(e=>e.scenarios.length>0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[u.map(e=>(0,s.jsxs)("button",{onClick:()=>r(e.key),className:"text-sm px-3 py-1.5 rounded-full border transition-colors font-medium "+(a===e.key?e.activeBg+" "+e.color:"border-card-border text-muted hover:border-muted"),children:[e.label," (",e.count,")"]},e.key)),(0,s.jsxs)("button",{onClick:()=>{let e=!o,s={};c.forEach((t,a)=>{s[t.id||String(a)]=e}),n(s)},className:"ml-auto text-sm px-3 py-1.5 rounded-full border border-card-border text-muted hover:border-muted transition-colors font-medium inline-flex items-center gap-1.5",children:[o?(0,s.jsx)(b,{className:"w-3.5 h-3.5"}):(0,s.jsx)(j,{className:"w-3.5 h-3.5"}),o?"Collapse All":"Expand All"]})]}),h.length>0?h.map((e,t)=>{let a=e.id||String(t),r=l[a]??!1,c=(e.scenarios||[]).reduce((e,s)=>({...e,[s.status]:(e[s.status]||0)+1}),{passed:0,failed:0,skipped:0}),o=(e.scenarios||[]).length,m=o>0?Math.round(c.passed/o*100):0;return(0,s.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card border border-card-border rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>n(e=>({...e,[a]:!e[a]})),className:"w-full text-left p-5 flex items-start gap-3 hover:bg-card-border/20 transition-colors cursor-pointer",children:[(0,s.jsx)(d.motion.div,{animate:{rotate:90*!!r},transition:{duration:.2},className:"mt-1 shrink-0",children:(0,s.jsx)(x.ChevronRight,{className:"w-4 h-4 text-muted"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted mt-0.5",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs mt-2 flex-wrap",children:[c.passed>0&&(0,s.jsxs)("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium",children:["✅ ",c.passed," passed"]}),c.failed>0&&(0,s.jsxs)("span",{className:"text-red-600 dark:text-red-400 font-medium",children:["❌ ",c.failed," failed"]}),c.skipped>0&&(0,s.jsxs)("span",{className:"text-yellow-600 dark:text-yellow-400 font-medium",children:["⏭ ",c.skipped," skipped"]}),o>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,s.jsxs)("span",{className:"text-muted",children:[m,"%"]}),(0,s.jsxs)("div",{className:"w-20 h-1.5 bg-card-border rounded-full overflow-hidden flex",children:[c.passed>0&&(0,s.jsx)("div",{className:"h-full bg-emerald-500",style:{width:`${c.passed/o*100}%`}}),c.failed>0&&(0,s.jsx)("div",{className:"h-full bg-red-500",style:{width:`${c.failed/o*100}%`}}),c.skipped>0&&(0,s.jsx)("div",{className:"h-full bg-yellow-500",style:{width:`${c.skipped/o*100}%`}})]})]})]})]})]}),(0,s.jsx)(v.AnimatePresence,{initial:!1,children:r&&(0,s.jsx)(d.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:"easeInOut"},className:"overflow-hidden",children:(0,s.jsx)("div",{className:"px-5 pb-5 space-y-3",children:(e.scenarios||[]).map((e,t)=>(0,s.jsxs)("div",{className:"border border-card-border rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full border "+(0,i.statusBg)(e.status),children:e.status})]}),(0,s.jsx)("div",{className:"space-y-1",children:(e.steps||[]).map((e,t)=>(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-accent font-mono w-12 shrink-0 font-semibold",children:e.keyword}),(0,s.jsx)("span",{className:(0,i.statusColor)(e.status),children:e.text}),null!=e.duration&&e.duration>0&&(0,s.jsx)("span",{className:"text-muted ml-auto shrink-0",children:(0,i.formatDuration)(e.duration)})]}),"failed"===e.status&&(e.error||e.errorMessage)&&(0,s.jsx)(w,{error:e.error||e.errorMessage})]},t))})]},t))})})})]},a)}):(0,s.jsxs)("div",{className:"text-center py-8 text-muted text-sm bg-card border border-card-border rounded-xl",children:["No ","all"!==a?a+" ":"","scenarios found."]})]})}function D({projectId:e,runId:c}){let x=(0,a.useDashboardStore)(s=>s.getProject(e)),[u,b]=(0,t.useState)(null),[j,g]=(0,t.useState)(!0),[N,v]=(0,t.useState)(null),[w,D]=(0,t.useState)("all"),[A,B]=(0,t.useState)(0),[C,T]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{if(u&&x){let e=u.timestamp?new Date(u.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Run";document.title=`Run ${e} - ${x.name} | BDD Dashboard`}else x&&(document.title=`${x.name} | BDD Dashboard`);return()=>{document.title="Silverline | Acceptance Test Dashboard"}},[u,x]),(0,t.useEffect)(()=>{let e;if(!c||"_"===c)return void g(!1);g(!0),v(null),T(!1);let s=(0,r.getDb)(),t=[],a=!1,d=!1,i=()=>{a&&d&&(g(!1),null===e?(b(null),T(!1)):void 0!==e&&(b({...e,features:t}),T(!0)))},n=(0,l.onSnapshot)((0,l.doc)(s,"runs",c),s=>{a=!0,e=s.exists()?{id:s.id,...(0,k.sanitizeTimestamps)(s.data())}:null,i()},e=>{console.error("Run listener error:",e),v(e.message||"An unexpected error occurred while loading run details."),g(!1),T(!1)}),o=(0,l.onSnapshot)((0,l.collection)(s,"runs",c,"features"),e=>{d=!0,t=e.docs.map(e=>({id:e.id,...(0,k.sanitizeTimestamps)(e.data())})),i()},e=>{console.error("Features listener error:",e),d=!0,i()});return()=>{n(),o(),T(!1)}},[c,A]),j)return(0,s.jsx)(o,{});if(N)return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[(0,s.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 max-w-md w-full text-center space-y-3",children:[(0,s.jsx)(m.AlertTriangle,{className:"w-10 h-10 text-red-500 mx-auto"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:"Failed to load run"}),(0,s.jsx)("p",{className:"text-sm text-muted",children:N}),(0,s.jsxs)("button",{onClick:()=>B(e=>e+1),className:"inline-flex items-center gap-2 px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors text-sm font-medium",children:[(0,s.jsx)(f,{className:"w-4 h-4"}),"Retry"]})]}),(0,s.jsx)(n.default,{href:"/project/"+e+"/",className:"text-accent text-sm hover:underline",children:"Back to project"})]});if(!u)return(0,s.jsxs)("div",{className:"text-center py-20 text-muted",children:[(0,s.jsx)("p",{children:"Run not found."}),(0,s.jsx)(n.default,{href:"/project/"+e+"/",className:"text-accent mt-2 inline-block",children:"Back to project"})]});let M=u.status||(u.summary?.failed>0?"failed":u.summary?.skipped>0?"skipped":"passed");return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(y.Breadcrumb,{items:[{label:x?.name||e,href:"/project/"+e+"/"},{label:u.timestamp?"Run "+new Date(u.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Run Details"}]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:x?.color}}),(0,s.jsx)("h2",{className:"text-2xl font-bold",children:x?.name||e}),(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full border "+(0,i.statusBg)(M),children:M}),C&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full border border-emerald-500/40 bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 font-medium",children:[(0,s.jsxs)("span",{className:"relative flex h-1.5 w-1.5",children:[(0,s.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,s.jsx)("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),"Live"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted mt-1",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(h,{className:"w-3.5 h-3.5"}),(0,i.formatDate)(u.timestamp)," at ",(0,i.formatTime)(u.timestamp)]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(p,{className:"w-3.5 h-3.5"}),u.branch]}),u.duration>0&&(0,s.jsx)("span",{children:(0,i.formatDuration)(u.duration)})]})]})}),(0,s.jsx)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total",value:u.summary?.total??0,color:"text-accent"},{label:"Passed",value:u.summary?.passed??0,color:"text-emerald-600 dark:text-emerald-400"},{label:"Failed",value:u.summary?.failed??0,color:"text-red-600 dark:text-red-400"},{label:"Skipped",value:u.summary?.skipped??0,color:"text-yellow-600 dark:text-yellow-400"}].map(e=>(0,s.jsxs)("div",{className:"bg-card border border-card-border rounded-xl p-4 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-muted",children:e.label}),(0,s.jsx)("p",{className:"text-2xl font-bold "+e.color,children:e.value})]},e.label))}),u.error&&(0,s.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.AlertTriangle,{className:"w-5 h-5 text-red-500"}),(0,s.jsx)("h3",{className:"font-semibold text-red-600 dark:text-red-400",children:"Run Error"})]}),(0,s.jsx)("pre",{className:"text-xs text-red-600/80 dark:text-red-400/80 font-mono whitespace-pre-wrap max-h-48 overflow-auto",children:u.error})]}),(0,s.jsx)(S,{features:u.features,statusFilter:w,setStatusFilter:D}),(!u.features||0===u.features.length)&&(0,s.jsx)("div",{className:"text-center py-8 text-muted text-sm bg-card border border-card-border rounded-xl",children:"No detailed results for this run."})]})}e.s(["default",()=>D],86983)}]);